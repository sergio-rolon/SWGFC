<!DOCTYPE html>
<html lang="en">
  <head>
    <link
      rel="icon"
      href="https://res.cloudinary.com/dseuvfwyj/image/upload/v1742439789/rnmoosiqswvstvm4weey.png"
    />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Iniciar sesión</title>

    <!-- Fuentes -->
    <link
      href="https://fonts.googleapis.com/css?family=Poppins"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
      rel="stylesheet"
    />

    <!-- style -->
    
    <link rel="stylesheet" href="../styles/login.css" />
    <link rel="stylesheet" href="../styles/commons.css" />
   <link rel="stylesheet" href="../styles/index.css" />

    <!-- Incluye el script de reCAPTCHA v3 -->
    <script src="https://www.google.com/recaptcha/api.js?render=6LeOkTAqAAAAAF8FEldq-RzmmB4OReSioONKtPRt"></script>
    <script defer src="../js/login.js"></script>

    <!--<script src="../assets/sweetAlert2/dist/sweetalert2.all.min.js"></script>-->
  </head>
  <body>
    <header>
      <nav class="navbar">
        <div class="logo">
          <img
            src="https://res.cloudinary.com/dseuvfwyj/image/upload/v1742439788/dsqsfik3wj4e6ya7ajko.png"
            alt="Logo"
            class="logo-img"
          />
        </div>
      </nav>
    </header>
    <main>
      <h1>SISTEMA WEB DE GESTIÓN DE FLOTILLA VEHICULAR</h1>
      <div class="contenedor" id="contenedor">
        <div class="cuadroDerecho">
          <div class="col-sm-7 derecha">
            <div class="cajaLogIn p-auto">
              <div class="contenidoLogIn">
                <h2>Ingresa tu correo organizacional</h2>
                <div
                  class="alert alert-danger fade show"
                  style="display: none"
                  role="alert"
                  id="alertValidaciones"
                >
                  <p id="alertValidacionesTexto"></p>
                </div>

                <form action="" id="formularioLogIn">
                  <div class="itemForm">
                    <div class="text-start">
                      <label for="correo-ipt">Correo electrónico:</label>
                      <br />
                    </div>
                    <div class="inputGroup">
                      <img
                        src="https://res.cloudinary.com/dz6zf3yio/image/upload/v1725421051/OneClickCar/cw4nzzwjirjpf8imni4p.png"
                        alt="correoLogo"
                      />
                      <input
                        type="email"
                        id="correo-ipt"
                        placeholder="Ejemplo: asesor@asesorenservicios.com"
                      /><br />
                    </div>
                  </div>
                  <div class="itemForm">
                    <div class="text-start">
                      <label for="password-ipt">Contraseña:</label><br />
                    </div>
                    <div class="inputGroup">
                      <img
                        src="https://res.cloudinary.com/duxbrimwv/image/upload/v1726193785/keyIcon_eqbgjg.svg"
                        alt="keyLogo"
                      />
                      <input
                        type="password"
                        id="password-ipt"
                        placeholder="********"
                      /><br />
                    </div>
                  </div>
                  <div class="itemForm text-center">
                    <button type="submit" id="btnLogIn">Iniciar sesión</button>
                    <div id="loader" style="display: none">
                    <div id="loadingMessage" style="text-align: center">
                    <p>Validando información...</p>
                    </div>
                </div>
                  </div>


                </form>
              </div>
            </div>
          </div>
        </div>
        <div class="cuadroIzquierdo">
          <img
            src="https://res.cloudinary.com/dseuvfwyj/image/upload/v1742439789/rnmoosiqswvstvm4weey.png"
            alt="Logo"
            class="logo-main"
          />
        </div>
      </div>

      <div class="help">
        <img
          src="https://res.cloudinary.com/dseuvfwyj/image/upload/v1743365387/hcy4gjrjwzyxss6ht5xt.svg"
          alt="Teléfono"
        />
        <span class="helpMessage"
          >En caso de problemas al iniciar sesión, contacta a tu administrador o
          recursos humanos</span
        >

        <img
          src="https://res.cloudinary.com/dseuvfwyj/image/upload/v1743365387/ieimav36b7hy9bcr8mvs.svg"
          alt="Email"
        />
      </div>
      <footer>
        <div><p class="pre-footer">MKT PROMOMARC S.A. DE C.V.</p></div>
        <div class="footer">
          <image
            src="https://res.cloudinary.com/dseuvfwyj/image/upload/v1742439788/dsqsfik3wj4e6ya7ajko.png"
            alt="logo"
            class="logo-footer"
          ></image>
          <p class="post-footer">
            Términos del sitio web | Política de privacidad | Declaración de
            accesibilidad | Código de conducta para usuarios
          </p>
        </div>
      </footer>

      </div>
    </main>
    <script>
      document
        .getElementById("btnLogIn")
        .addEventListener("click", function (event) {
          event.preventDefault();
    // Oculta el botón y muestra el mensaje de validación
    document.getElementById("btnLogIn").style.display = "none";
    document.getElementById("loader").style.display = "block";
          // Asegúrate de que grecaptcha se ha cargado antes de ejecutarlo
          if (typeof grecaptcha !== "undefined") {
            grecaptcha.ready(function () {
              grecaptcha
                .execute("6LeOkTAqAAAAAF8FEldq-RzmmB4OReSioONKtPRt", {
                  action: "submit",
                })
                .then(function (token) {
                  console.log("Token generado:", token);
                  // Aquí podrías enviar el token al backend
                  let email = document.getElementById("correo-ipt").value;
                  let contrasena =
                    document.getElementById("password-ipt").value;
                  sendDataLogin(token, email, contrasena);
                });
            });
          } else {
            console.error("reCAPTCHA no está cargado correctamente.");
  // Si hay un error, volvemos a mostrar el botón
            document.getElementById("btnLogIn").style.display = "block";
            document.getElementById("loader").style.display = "none";
          }
        });
    </script>
    <style>
      #loader {
        border: 4px solid #f3f3f3;
        border-top: 4px solid #3498db;
        border-radius: 50%;
        width: 24px;
        height: 24px;
        animation: spin 1s linear infinite;
        margin: 0 auto;
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    </style>
  </body>
</html>
